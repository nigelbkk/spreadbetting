<Window x:Class="SpreadTrader.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:properties="clr-namespace:SpreadTrader.Properties"
        xmlns:local="clr-namespace:SpreadTrader"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="SpreadTrader" Height="598" Width="1089" Closing="Window_Closing" FontFamily="Tahoma" LocationChanged="Window_LocationChanged" SizeChanged="Window_SizeChanged" Loaded="Window_Loaded" >
	<Window.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="styles.xaml"/>
			</ResourceDictionary.MergedDictionaries>
			<local:CurrencyConverter x:Key="cconverter" />
			<local:PercentConverter x:Key="pcconverter"/>

			<Style TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
				<Setter Property="BorderBrush" Value="DarkGray"/>
				<Setter Property="BorderThickness" Value="0.0"/>
				<Setter Property="Width" Value="120"/>
				<Setter Property="Background" Value="Ivory"/>
			</Style>
			<Style TargetType="{x:Type TextBlock}">
				<Setter Property="FontSize" Value="12"/>
			</Style>
		</ResourceDictionary>
	</Window.Resources>
	<Grid>
		<DockPanel>
			<Grid Name ="MainGrid" Margin="4,0,4,24">
				<Grid.RowDefinitions>
					<RowDefinition Height="28"/>
					<RowDefinition/>
				</Grid.RowDefinitions>
				<Grid Grid.Row ="0" Name="MainMenu">
					<StackPanel Orientation="Horizontal" VerticalAlignment="Top" DockPanel.Dock="Top" Height="28">
						<Button Content ="Refresh" Tag="Refresh" Grid.Column="1" ToolTip="Refresh Markets" Click="Button_Click"/>
						<Button Content ="Favourites" Tag="Favourites" Name="FavouritesButton" Grid.Column="2" ToolTip="Favourites" Click="Button_Click"/>
						<Button Content ="Settings" Tag="Settings" Grid.Column="3" ToolTip="Settings" Click="Button_Click"/>
						<Label Width="58" />
						<Label BorderThickness="0.5" MouseDown="OnUpdateAccount">
							<StackPanel Orientation="Horizontal" >
								<TextBlock Text="Balance: "/>
								<TextBlock Text="{Binding Path=Balance, Converter={StaticResource cconverter }}" />
							</StackPanel>
						</Label>
						<Label BorderThickness="0.5">
							<StackPanel Orientation="Horizontal">
								<TextBlock Text="Exposure: "/>
								<TextBlock Text="{Binding Path=Exposure, Converter={StaticResource cconverter }}"/>
							</StackPanel>
						</Label>
						<Label BorderThickness="0.5" Margin="0, 0, 8, 0">
							<StackPanel Orientation="Horizontal">
								<TextBlock Text="Commission: "/>
								<TextBlock Text="{Binding Path=Commission, Converter={StaticResource pcconverter }}"/>
							</StackPanel>
						</Label>

                        <Button Tag="25" Content="{Binding StakesPreselect0, Mode=OneWay}" Click="Button_Click" BorderThickness="0.0" ToolTip="{Binding StakesPreselectTooltip0}" />
                        <Button Tag="50" Content="{Binding StakesPreselect1, Mode=OneWay}" Click="Button_Click" BorderThickness="0.0" ToolTip="{Binding StakesPreselectTooltip1}" />
                        <Button Tag="100" Content="{Binding StakesPreselect2, Mode=OneWay}" Click="Button_Click" BorderThickness="0.0" ToolTip="{Binding StakesPreselectTooltip2}"/>
                    </StackPanel>
				</Grid>
				<Grid Grid.Row="1" Name="InnerGrid" >
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="{Binding splitter2, Source={x:Static properties:Settings.Default}, Mode=TwoWay}" />
						<ColumnDefinition/>
					</Grid.ColumnDefinitions>
					<Grid Grid.Column="0" Name ="EventsGrid">
						<Border BorderBrush="DarkGray" BorderThickness="0" Name ="EventsTreeGrid">
							<local:EventsTreeControl x:Name="EventsTree"/>
						</Border>
					</Grid>

					<Grid Grid.Column="1" Name="RightGrid">
						<TabControl Name ="TabControl" SelectionChanged="TabControl_SelectionChanged" MouseDoubleClick="TabControl_MouseDoubleClick" MouseDown="TabControl_MouseDown" >
                            <TabItem Header=" + " PreviewMouseDown="TabItem_PreviewMouseDown" >
                                <local:TabContent/>
                            </TabItem>
                        </TabControl>
                        
					</Grid>
					<GridSplitter Grid.Column="1" Background="DarkGray" Width="2.5" HorizontalAlignment="Left"/>
				</Grid>
			</Grid>
		</DockPanel>
        <StatusBar DockPanel.Dock="Bottom" Height="23" VerticalAlignment="Bottom" >
            <!--<TextBlock Text="{Binding Path=Notification}" Width="120" Margin="0,0,4,0"></TextBlock>-->
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Path=Status}" Background="Ivory" Width="200" Margin="0,0,4,0"></TextBlock>
                <TextBlock Text="{Binding Path=Notification}" Background="Ivory" Width="700"></TextBlock>
            </StackPanel>
		</StatusBar>
	</Grid>
</Window>
