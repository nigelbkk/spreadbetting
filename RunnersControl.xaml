<UserControl x:Class="SpreadTrader.RunnersControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:SpreadTrader"
             mc:Ignorable="d" 
	         DataContext="{Binding RelativeSource={RelativeSource Self}}"
             d:DesignHeight="450" d:DesignWidth="800" >
	<UserControl.Resources>
		<local:OddsConverter x:Key="oconverter" />
		<local:StakeConverter x:Key="sconverter" />
		<local:PercentConverter x:Key="pconverter" />
		<Style BasedOn="{StaticResource {x:Type Label}}" 
            TargetType="{x:Type Label}">
			<!--<Setter Property="FontSize" Value="110"/>-->
		</Style>
		<Style TargetType="{x:Type TextBlock}">
			<Setter Property="FontSize" Value="29"/>
			<Setter Property="HorizontalAlignment" Value="Center"/>
		</Style>
		<Style TargetType="{x:Type Button}">
			<Style.Triggers>
				<MultiTrigger>
					<MultiTrigger.Conditions>
						<Condition Property="IsPressed" Value="False" />
						<Condition Property="IsMouseOver" Value="True" />
					</MultiTrigger.Conditions>
				</MultiTrigger>
				<Trigger Property="IsPressed" Value="True">
					<Setter Property="Button.Background" Value="Purple" />
					<Setter Property="Button.Effect">
						<Setter.Value>
							<DropShadowEffect Color="DarkGray" Direction="320" ShadowDepth="0" BlurRadius="0" Opacity="0" />
						</Setter.Value>
					</Setter>
				</Trigger>

			</Style.Triggers>
			<EventSetter Event="Click" Handler="Button_Click"/>
			<Setter Property="VerticalContentAlignment" Value="Center"/>
			<Setter Property="Background" Value="DarkGray"/>
			<Setter Property="BorderBrush" Value="DarkGray"/>
			<Setter Property="BorderThickness" Value="0.5"/>
			<Setter Property="Width" Value="50"/>
			<Setter Property="Margin" Value="0,0,3,3"/>
			<Setter Property="HorizontalContentAlignment" Value="Center"/>
			<Setter Property="Button.Effect">
				<Setter.Value>
					<DropShadowEffect Color="DarkGray" Direction="320" ShadowDepth="3" BlurRadius="5" Opacity="0.5" />
				</Setter.Value>
			</Setter>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate>
						<ControlTemplate.Resources>
							<Style TargetType="TextBlock" BasedOn="{StaticResource {x:Type TextBlock}}">
								<Setter Property="TextAlignment" Value="Center"/>
								<Setter Property="FontSize" Value="9.5"/>
								<Setter Property="FontWeight" Value="Light"/>
								<Setter Property="Background" Value="#00000000"/>
							</Style>
							<Style TargetType="Label" BasedOn="{StaticResource {x:Type Label}}">
								<Setter Property="Width" Value="160"/>
								<Setter Property="HorizontalContentAlignment" Value="Left"/>
								<Setter Property="Background" Value="#00000000"/>
								<Setter Property="FontSize" Value="9.5"/>
								<Setter Property="Background" Value="#00000000"/>
							</Style>
						</ControlTemplate.Resources>
						<Grid>
							<Grid>
								<StackPanel Orientation="Vertical" Background="{TemplateBinding Background}" Height="30" VerticalAlignment="Center">
									<TextBlock Text="{Binding Path=price, Converter={StaticResource oconverter}}" Margin="0,4,0,0"/>
									<TextBlock Text="{Binding Path=size, Converter={StaticResource sconverter}}" FontSize="8" FontWeight="Normal"/>
								</StackPanel>
							</Grid>
							<!--<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />-->
						</Grid>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<DataTemplate  x:Key="DataTemplate_Runner">
			<DataTemplate.Resources>
			</DataTemplate.Resources>
			<UniformGrid Rows="1"  >
				<StackPanel>
					<Border BorderBrush="DarkGray" BorderThickness="0.5">
						<StackPanel Orientation="Horizontal">
							<Label Content="{Binding Path=Name}" Width="160" HorizontalContentAlignment="Left"/>
							<Button DataContext="{Binding BackValues[2]}" Background="{StaticResource Back2Color}"/>
							<Button DataContext="{Binding BackValues[1]}" Background="{StaticResource Back1Color}"/>
							<Button DataContext="{Binding BackValues[0]}" Background="{StaticResource Back0Color}"/>
							<Button DataContext="{Binding LayValues[0]}" Background="{StaticResource Lay0Color}"/>
							<Button DataContext="{Binding LayValues[1]}" Background="{StaticResource Lay1Color}"/>
							<Button DataContext="{Binding LayValues[2]}" Background="{StaticResource Lay2Color}"/>
						</StackPanel>
					</Border>
				</StackPanel>
			</UniformGrid>
		</DataTemplate>
	</UserControl.Resources>
    <Grid SizeChanged="Grid_SizeChanged">
		<Grid>
			<ItemsControl Name="SV1" FontFamily="Verdana" FontSize="9" Foreground="#FF5F4D4D" 
						DataContext="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"
						 ItemTemplate="{DynamicResource DataTemplate_Runner}" ItemsSource="{Binding Path=LiveRunners}" >
				<ItemsControl.Template>
					<ControlTemplate>
						<ScrollViewer Padding="{TemplateBinding Control.Padding}">
							<ItemsPresenter />
						</ScrollViewer>
					</ControlTemplate>
				</ItemsControl.Template>
			</ItemsControl>
		</Grid>
	</Grid>
</UserControl>
